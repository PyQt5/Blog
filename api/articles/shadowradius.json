{"author":"Irony","title":"PyQt5无边框圆角阴影","slug":"shadowradius","date":"2019-04-26 00:06:26","updated":"2019-10-21T14:40:37.746Z","comments":true,"path":"api/articles/shadowradius.json","url":"https://pyqt5.com/shadowradius.html","excerpt":"在做PyQt窗口开发中经常会遇到要做一些无边框不规则的窗口，可能还会带有阴影效果，这里演示做一个简单的无边框圆角的窗口，原理就在于背景窗口的透明和一层有色背景控件的叠加。<br>","covers":["https://github.com/PyQt5/PyQt/raw/master/Demo/ScreenShot/FramelessDialog1.png","https://github.com/PyQt5/PyQt/raw/master/Demo/ScreenShot/FramelessDialog.png"],"content":"<p>在做PyQt窗口开发中经常会遇到要做一些无边框不规则的窗口，可能还会带有阴影效果，这里演示做一个简单的无边框圆角的窗口，原理就在于背景窗口的透明和一层有色背景控件的叠加。<br><a id=\"more\"></a></p>\n<h2 id=\"原理说明\"><a href=\"#原理说明\" class=\"headerlink\" title=\"原理说明\"></a>原理说明</h2><ol>\n<li>黑色（方便说明）的<code>QDialog</code>或者<code>QWidget</code>作为全透明无边框窗口。</li>\n<li>其中白色的<code>QWidget</code>才是主要显示圆角和阴影的窗口，用于承载其它控件的显示。</li>\n<li>注意红色和紫色的方框内的层次。</li>\n<li>另：如果要熟悉纯代码编写请看 <a href=\"https://github.com/PyQt5/PyQt/blob/master/Demo/FramelessDialog.py\" target=\"_blank\" rel=\"noopener\">FramelessDialog.py</a></li>\n</ol>\n<p>如图：</p>\n<p><img src=\"https://github.com/PyQt5/PyQt/raw/master/Demo/ScreenShot/FramelessDialog1.png\" alt=\"FramelessDialog1\"></p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><p><a href=\"https://github.com/PyQt5/PyQt/blob/master/Demo/FramelessDialog.py\" target=\"_blank\" rel=\"noopener\">https://github.com/PyQt5/PyQt/blob/master/Demo/FramelessDialog.py</a></p>\n<pre><code class=\"python\">#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n\n&quot;&quot;&quot;\nCreated on 2019年4月25日\n@author: Irony\n@site: https://pyqt5.com https://github.com/892768447\n@email: 892768447@qq.com\n@file: FramelessWidget\n@description: 无边框圆角带阴影窗口 \n&quot;&quot;&quot;\nfrom PyQt5.QtCore import Qt\nfrom PyQt5.QtWidgets import QDialog, QGraphicsDropShadowEffect\nfrom frameless import Ui_Dialog\n\n\n__Author__ = &#39;Irony&#39;\n__Copyright__ = &#39;Copyright (c) 2019&#39;\n\n\nclass Window(QDialog, Ui_Dialog):\n\n    def __init__(self, *args, **kwargs):\n        super(Window, self).__init__(*args, **kwargs)\n        self.mPos = None\n        self.setupUi(self)\n        self.closeButton.clicked.connect(self.close)\n        # 重点\n        # 无边框\n        self.setWindowFlags(self.windowFlags() | Qt.FramelessWindowHint)\n        # 背景透明（就是ui中黑色背景的那个控件）\n        self.setAttribute(Qt.WA_TranslucentBackground, True)\n\n        # 添加阴影\n        effect = QGraphicsDropShadowEffect(self)\n        effect.setBlurRadius(12)\n        effect.setOffset(0, 0)\n        effect.setColor(Qt.gray)\n        self.setGraphicsEffect(effect)\n\n    # 加上简单的移动功能\n\n    def mousePressEvent(self, event):\n        &quot;&quot;&quot;鼠标点击事件&quot;&quot;&quot;\n        if event.button() == Qt.LeftButton:\n            self.mPos = event.pos()\n        event.accept()\n\n    def mouseReleaseEvent(self, event):\n        &#39;&#39;&#39;鼠标弹起事件&#39;&#39;&#39;\n        self.mPos = None\n        event.accept()\n\n    def mouseMoveEvent(self, event):\n        if event.buttons() == Qt.LeftButton and self.mPos:\n            self.move(self.mapToGlobal(event.pos() - self.mPos))\n        event.accept()\n\n\nif __name__ == &#39;__main__&#39;:\n    import sys\n    from PyQt5.QtWidgets import QApplication\n    app = QApplication(sys.argv)\n    w = Window()\n    w.show()\n    sys.exit(app.exec_())\n</code></pre>\n<h2 id=\"效果图\"><a href=\"#效果图\" class=\"headerlink\" title=\"效果图\"></a>效果图</h2><p><img src=\"https://github.com/PyQt5/PyQt/raw/master/Demo/ScreenShot/FramelessDialog.png\" alt=\"FramelessDialog\"></p>\n<h2 id=\"下载\"><a href=\"#下载\" class=\"headerlink\" title=\"下载\"></a>下载</h2><p><a href=\"/files/无边框圆角阴影.zip\">无边框圆角阴影.zip</a></p>\n","raw":"---\nauthor: Irony\ntitle: PyQt5无边框圆角阴影\ndate: 2019-04-26 00:06:26\ntop: 1\ntags: \n - PyQt\n - 无边框\n - 阴影\n - 圆角\ncategories: 例子\n---\n\n在做PyQt窗口开发中经常会遇到要做一些无边框不规则的窗口，可能还会带有阴影效果，这里演示做一个简单的无边框圆角的窗口，原理就在于背景窗口的透明和一层有色背景控件的叠加。\n<!-- more -->\n\n## 原理说明\n\n1. 黑色（方便说明）的`QDialog`或者`QWidget`作为全透明无边框窗口。\n2. 其中白色的`QWidget`才是主要显示圆角和阴影的窗口，用于承载其它控件的显示。\n3. 注意红色和紫色的方框内的层次。\n4. 另：如果要熟悉纯代码编写请看 [FramelessDialog.py](https://github.com/PyQt5/PyQt/blob/master/Demo/FramelessDialog.py)\n\n如图：\n\n![FramelessDialog1](https://github.com/PyQt5/PyQt/raw/master/Demo/ScreenShot/FramelessDialog1.png)\n\n## 代码\n\nhttps://github.com/PyQt5/PyQt/blob/master/Demo/FramelessDialog.py\n\n```python\n#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n\n\"\"\"\nCreated on 2019年4月25日\n@author: Irony\n@site: https://pyqt5.com https://github.com/892768447\n@email: 892768447@qq.com\n@file: FramelessWidget\n@description: 无边框圆角带阴影窗口 \n\"\"\"\nfrom PyQt5.QtCore import Qt\nfrom PyQt5.QtWidgets import QDialog, QGraphicsDropShadowEffect\nfrom frameless import Ui_Dialog\n\n\n__Author__ = 'Irony'\n__Copyright__ = 'Copyright (c) 2019'\n\n\nclass Window(QDialog, Ui_Dialog):\n\n    def __init__(self, *args, **kwargs):\n        super(Window, self).__init__(*args, **kwargs)\n        self.mPos = None\n        self.setupUi(self)\n        self.closeButton.clicked.connect(self.close)\n        # 重点\n        # 无边框\n        self.setWindowFlags(self.windowFlags() | Qt.FramelessWindowHint)\n        # 背景透明（就是ui中黑色背景的那个控件）\n        self.setAttribute(Qt.WA_TranslucentBackground, True)\n\n        # 添加阴影\n        effect = QGraphicsDropShadowEffect(self)\n        effect.setBlurRadius(12)\n        effect.setOffset(0, 0)\n        effect.setColor(Qt.gray)\n        self.setGraphicsEffect(effect)\n\n    # 加上简单的移动功能\n\n    def mousePressEvent(self, event):\n        \"\"\"鼠标点击事件\"\"\"\n        if event.button() == Qt.LeftButton:\n            self.mPos = event.pos()\n        event.accept()\n\n    def mouseReleaseEvent(self, event):\n        '''鼠标弹起事件'''\n        self.mPos = None\n        event.accept()\n\n    def mouseMoveEvent(self, event):\n        if event.buttons() == Qt.LeftButton and self.mPos:\n            self.move(self.mapToGlobal(event.pos() - self.mPos))\n        event.accept()\n\n\nif __name__ == '__main__':\n    import sys\n    from PyQt5.QtWidgets import QApplication\n    app = QApplication(sys.argv)\n    w = Window()\n    w.show()\n    sys.exit(app.exec_())\n```\n\n\n## 效果图\n\n![FramelessDialog](https://github.com/PyQt5/PyQt/raw/master/Demo/ScreenShot/FramelessDialog.png)\n\n## 下载\n\n[无边框圆角阴影.zip](/files/无边框圆角阴影.zip)","categories":[{"name":"例子","path":"api/categories/例子.json"}],"tags":[{"name":"PyQt","path":"api/tags/PyQt.json"},{"name":"阴影","path":"api/tags/阴影.json"},{"name":"无边框","path":"api/tags/无边框.json"},{"name":"圆角","path":"api/tags/圆角.json"}]}