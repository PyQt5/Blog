{"author":"myphper","title":"在Mac上以正确的姿势使用PyQtClient看Demo","slug":"pyqtclientmac","date":"2019-04-02 17:18:43","updated":"2020-02-21T15:19:35.315Z","comments":true,"path":"api/articles/pyqtclientmac.json","url":"https://pyqt5.com/pyqtclientmac.html","excerpt":"由于PyQtClient只提供了Windows的版本，这里记录下编译后在Mac上运行。<br>","covers":null,"content":"<p>由于PyQtClient只提供了Windows的版本，这里记录下编译后在Mac上运行。<br><a id=\"more\"></a></p>\n<h2 id=\"下载项目\"><a href=\"#下载项目\" class=\"headerlink\" title=\"下载项目\"></a>下载项目</h2><p>安装git略。没有的东西可以都先去试试brew install xxx。没安装homebrew的建议使用搜索引擎</p>\n<p><code>git clone https://github.com/PyQt5/PyQtClient.git</code></p>\n<h2 id=\"配置环境\"><a href=\"#配置环境\" class=\"headerlink\" title=\"配置环境\"></a>配置环境</h2><ol>\n<li>打开IDE配置python环境，使用anaconda比较方便</li>\n<li>推荐用pycharm，我是习惯了用idea。anaconda安装可以去官网下载。</li>\n<li>环境原因，选择新建一个 python 3.6 p.s. 我取的环境名字就是 3.6 所以后面的3.6其实是这个原因</li>\n</ol>\n<h2 id=\"conda源\"><a href=\"#conda源\" class=\"headerlink\" title=\"conda源\"></a>conda源</h2><p>最好是加环境变量，不加也可以，就是以后用到的都需要指定路径，不太常用，我就没加</p>\n<pre><code>~/anaconda3/bin/conda config --add channels conda-forge\n~/anaconda3/bin/conda config --add channels defaults\n~/anaconda3/bin/conda config --add channels r\n~/anaconda3/bin/conda config --add channels bioconda\n~/anaconda3/bin/conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/ \n</code></pre><h2 id=\"pip源\"><a href=\"#pip源\" class=\"headerlink\" title=\"pip源\"></a>pip源</h2><pre><code>mkdir ~/.pip &amp;&amp; vim ~/.pip/pip.conf\n</code></pre><pre><code>[global]\nindex-url = http://mirrors.aliyun.com/pypi/simple/\n[install]\ntrusted-host = mirrors.aliyun.com\n</code></pre><h2 id=\"安装编译依赖\"><a href=\"#安装编译依赖\" class=\"headerlink\" title=\"安装编译依赖\"></a>安装编译依赖</h2><pre><code>~/.conda/envs/3.6/bin/pip install -r PyQtClient/requirements.txt\n</code></pre><p>运行提示没有webkit，开始手动编译</p>\n<ol>\n<li><code>wget http://download.qt.io/archive/qt/5.9/5.9.0/qt-opensource-mac-x64-5.9.0.dmg</code></li>\n<li><code>wget https://github.com/annulen/webkit/releases/download/qtwebkit-5.212.0-alpha2/qtwebkit-5.212.0_alpha2-qt59-darwin-x64.tar.xz</code></li>\n<li><code>wget https://www.riverbankcomputing.com/static/Downloads/PyQt5/5.10.1/PyQt5_gpl-5.10.1.zip</code></li>\n<li><code>wget https://www.riverbankcomputing.com/static/Downloads/sip/4.19.8/sip-4.19.8.tar.gz</code></li>\n<li>编译sip：<code>~/.conda/envs/3.6/bin/python configure.py --platform macx-g++ &amp;&amp; make &amp;&amp; sudo make install</code></li>\n<li>编译Webkit.so 没有qmake 和 sip的环境变量， 所以后面都是手动指定的<pre><code>~/.conda/envs/3.6/bin/python configure.py --confirm-license --no-designer-plugin --no-qml-plugin --disable=dbus --disable=QAxContainer --disable=QtAndroidExtras --disable=QtBluetooth --disable=QtDBus --disable=QtDesigner --disable=Enginio --disable=QtLocation --disable=QtMacExtras --disable=QtMultimedia --disable=QtMultimediaWidgets --disable=QtNfc --disable=QtSerialPort --disable=QtSql --disable=QtSvg --disable=QtTest --disable=QtWinExtras --disable=QtX11Extras --disable=QtXml --disable=QtXmlPatterns --disable=pylupdate --disable=pyrcc --qmake=~/Qt5.9.0/5.9/clang_64/bin/qmake --sip=~/.conda/3.6/bin/sip &amp;&amp; make &amp;&amp; sudo make install\n</code></pre></li>\n</ol>\n<h2 id=\"插曲\"><a href=\"#插曲\" class=\"headerlink\" title=\"插曲\"></a>插曲</h2><ol>\n<li>libcurl版本要求10.0，而我的是9.0，原因是前面我自己摸索，乱装依赖，所以遇到了<pre><code>~/anaconda3/bin/conda install -n 3.6 -c conda-forge libcurl\n</code></pre></li>\n<li>结果这个libcurl 10.0.0 是装上了，可是pygit2版本不对了，conda给升级了，PyQtClient里requirements.txt要求这个包的版本（pygit2==0.27.2）几乎决定了其他的环境版本。后来还是老实的用conda去装了。这个连python版本什么的都会跟着变的。最后降级的结果是python 3.6.7<pre><code>~/anaconda3/bin/conda install -n 3.6 -c conda-forge libgit2==0.27.2\n</code></pre></li>\n</ol>\n<p>至此总算是启动正常了。</p>\n","raw":"---\nauthor: myphper\ntitle: 在Mac上以正确的姿势使用PyQtClient看Demo\ndate: 2019-04-02 17:18:43\ntop: 1\ntags: \n - PyQt\ncategories: 教程\n---\n\n由于PyQtClient只提供了Windows的版本，这里记录下编译后在Mac上运行。\n<!-- more -->\n\n## 下载项目\n\n安装git略。没有的东西可以都先去试试brew install xxx。没安装homebrew的建议使用搜索引擎\n\n```git clone https://github.com/PyQt5/PyQtClient.git```\n\n## 配置环境\n\n1. 打开IDE配置python环境，使用anaconda比较方便\n2. 推荐用pycharm，我是习惯了用idea。anaconda安装可以去官网下载。\n3. 环境原因，选择新建一个 python 3.6 p.s. 我取的环境名字就是 3.6 所以后面的3.6其实是这个原因\n\n## conda源\n\n最好是加环境变量，不加也可以，就是以后用到的都需要指定路径，不太常用，我就没加\n\n```\n~/anaconda3/bin/conda config --add channels conda-forge\n~/anaconda3/bin/conda config --add channels defaults\n~/anaconda3/bin/conda config --add channels r\n~/anaconda3/bin/conda config --add channels bioconda\n~/anaconda3/bin/conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/ \n```\n\n## pip源\n\n```\nmkdir ~/.pip && vim ~/.pip/pip.conf\n```\n\n```\n[global]\nindex-url = http://mirrors.aliyun.com/pypi/simple/\n[install]\ntrusted-host = mirrors.aliyun.com\n```\n\n## 安装编译依赖\n\n```\n~/.conda/envs/3.6/bin/pip install -r PyQtClient/requirements.txt\n```\n\n运行提示没有webkit，开始手动编译\n\n1. `wget http://download.qt.io/archive/qt/5.9/5.9.0/qt-opensource-mac-x64-5.9.0.dmg`\n2. `wget https://github.com/annulen/webkit/releases/download/qtwebkit-5.212.0-alpha2/qtwebkit-5.212.0_alpha2-qt59-darwin-x64.tar.xz`\n3. `wget https://www.riverbankcomputing.com/static/Downloads/PyQt5/5.10.1/PyQt5_gpl-5.10.1.zip`\n4. `wget https://www.riverbankcomputing.com/static/Downloads/sip/4.19.8/sip-4.19.8.tar.gz`\n5. 编译sip：`~/.conda/envs/3.6/bin/python configure.py --platform macx-g++ && make && sudo make install`\n6. 编译Webkit.so 没有qmake 和 sip的环境变量， 所以后面都是手动指定的\n```\n~/.conda/envs/3.6/bin/python configure.py --confirm-license --no-designer-plugin --no-qml-plugin --disable=dbus --disable=QAxContainer --disable=QtAndroidExtras --disable=QtBluetooth --disable=QtDBus --disable=QtDesigner --disable=Enginio --disable=QtLocation --disable=QtMacExtras --disable=QtMultimedia --disable=QtMultimediaWidgets --disable=QtNfc --disable=QtSerialPort --disable=QtSql --disable=QtSvg --disable=QtTest --disable=QtWinExtras --disable=QtX11Extras --disable=QtXml --disable=QtXmlPatterns --disable=pylupdate --disable=pyrcc --qmake=~/Qt5.9.0/5.9/clang_64/bin/qmake --sip=~/.conda/3.6/bin/sip && make && sudo make install\n```\n\n## 插曲\n\n1. libcurl版本要求10.0，而我的是9.0，原因是前面我自己摸索，乱装依赖，所以遇到了\n```\n~/anaconda3/bin/conda install -n 3.6 -c conda-forge libcurl\n```\n2. 结果这个libcurl 10.0.0 是装上了，可是pygit2版本不对了，conda给升级了，PyQtClient里requirements.txt要求这个包的版本（pygit2==0.27.2）几乎决定了其他的环境版本。后来还是老实的用conda去装了。这个连python版本什么的都会跟着变的。最后降级的结果是python 3.6.7\n```\n~/anaconda3/bin/conda install -n 3.6 -c conda-forge libgit2==0.27.2\n```\n\n至此总算是启动正常了。","categories":[{"name":"教程","path":"api/categories/教程.json"}],"tags":[{"name":"PyQt","path":"api/tags/PyQt.json"}]}